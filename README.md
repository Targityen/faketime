# 概要

dockerコンテナでシステム日付を変更するとホストのシステム日付も同時に変更されてしまいます。

このプロジェクトはdockerコンテナ内のシステム日付だけを変更するための方法を示したサンプルです。
テストなどでシステム日付を一時的に変更したい場合などに参考にしてください。

# 実行方法

*(1) イメージをビルドします。*

```
docker build -t faketime .
```
    
初回のみ CentOS のイメージのビルドに少し時間がかかります。

*(2) ビルドしたイメージ一覧を確認します。*

```
docker images
```
    
以下のようなイメージ一覧が表示されます。
    
```
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
faketime            latest              64794ea54ab0        8 seconds ago       489MB
centos              6                   70b5d81549ec        3 months ago        195MB
```

*(3) コンテナをビルドして検証用コマンドを実行します。*

```
docker run --rm <faketimeイメージのIMAGE ID>
```

検証用のコマンドが実行され、コンテナ内のシステム日付が変更されていることが確認できます。

```
Thu Aug  2 17:21:29 JST 2018　<現在日時>
Sat Jan  1 08:59:59 JST 2000　<2000-01-01 09:00:00を起点にした日時>
Sun Aug  5 17:21:29 JST 2018　<3日後>
Mon Aug  4 17:21:29 JST 2008　<10年前>
Thu Aug  2 17:21:29 JST 2018　<現在日時>
```
    
システム日付の変更にはそれぞれ以下のフォーマットを指定しています。
    
|フォーマット|説明|
|:---|:---|
|@2000-01-01 09:00:00|2000-01-01 09:00:00を起点にした日時|
|+3d|3日後|
|-10y|10年前|

フォーマットの詳しい説明は [libfaketime](https://github.com/wolfcw/libfaketime) をご覧ください。

自動テストなどと組み合わせることでホストのシステム日付に影響を与えることなくシステム日付の変更のテストが実施できます。
